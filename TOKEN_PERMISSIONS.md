# Cloudflare API Token æƒé™é…ç½®æŒ‡å—

## âŒ å½“å‰é—®é¢˜

API Token æƒé™ä¸è¶³ï¼Œå‡ºç° 403 Forbidden é”™è¯¯ï¼š
- `GET /user/tokens/verify -> 403 Forbidden`
- `GET /memberships -> 403 Forbidden`

## âœ… æ­£ç¡®çš„ Token é…ç½®

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åˆ›å»ºå…·æœ‰æ­£ç¡®æƒé™çš„ API Tokenï¼š

### æ­¥éª¤ 1ï¼šè®¿é—® Token åˆ›å»ºé¡µé¢

è®¿é—®ï¼šhttps://dash.cloudflare.com/profile/api-tokens

### æ­¥éª¤ 2ï¼šåˆ›å»º Token

1. ç‚¹å‡» **"Create Token"**
2. é€‰æ‹© **"Create Custom Token"** ï¼ˆè€Œä¸æ˜¯é¢„è®¾æ¨¡æ¿ï¼‰

### æ­¥éª¤ 3ï¼šé…ç½®æƒé™

æ·»åŠ ä»¥ä¸‹æƒé™ï¼š

#### å¿…éœ€æƒé™ï¼š

**Account æƒé™ï¼š**
- `Account` â†’ `Cloudflare Pages` â†’ **Edit**
- `Account` â†’ `Account Settings` â†’ **Read**

**User æƒé™ï¼š**
- `User` â†’ `User Details` â†’ **Read**
- `User` â†’ `Memberships` â†’ **Read**

#### å®Œæ•´é…ç½®ç¤ºä¾‹ï¼š

```
Token name: NATS-TTY Deployment

Permissions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type        â”‚ Resource             â”‚ Access â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Account     â”‚ Cloudflare Pages     â”‚ Edit   â”‚
â”‚ Account     â”‚ Account Settings     â”‚ Read   â”‚
â”‚ User        â”‚ User Details         â”‚ Read   â”‚
â”‚ User        â”‚ Memberships          â”‚ Read   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Account Resources:
  Include â†’ All accounts (æˆ–é€‰æ‹©ç‰¹å®šè´¦æˆ·)

IP Address Filtering (å¯é€‰):
  ç•™ç©ºï¼ˆå…è®¸æ‰€æœ‰ IPï¼‰

TTL:
  æ ¹æ®éœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´
```

### æ­¥éª¤ 4ï¼šåˆ›å»ºå¹¶å¤åˆ¶ Token

1. ç‚¹å‡» **"Continue to summary"**
2. æ£€æŸ¥æƒé™é…ç½®
3. ç‚¹å‡» **"Create Token"**
4. **ç«‹å³å¤åˆ¶ Token**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰

### æ­¥éª¤ 5ï¼šæµ‹è¯• Token

å°†æ–°çš„ Token æä¾›ç»™æˆ‘ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```
æ–°çš„ Tokenï¼šxxxxxxxxxxxxx
```

## ğŸ¯ å¿«æ·æ–¹æ³•ï¼šä½¿ç”¨é¢„è®¾æ¨¡æ¿

æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨é¢„è®¾æ¨¡æ¿ï¼š

1. è®¿é—®ï¼šhttps://dash.cloudflare.com/profile/api-tokens
2. æ‰¾åˆ° **"Edit Cloudflare Workers"** æ¨¡æ¿
3. ç‚¹å‡» **"Use template"**
4. åœ¨æƒé™ä¸­é¢å¤–æ·»åŠ ï¼š
   - `User` â†’ `User Details` â†’ **Read**
   - `User` â†’ `Memberships` â†’ **Read**
5. åˆ›å»ºå¹¶å¤åˆ¶ Token

## ğŸ”„ æ›¿ä»£æ–¹æ¡ˆï¼šä½¿ç”¨ OAuth ç™»å½•

å¦‚æœåˆ›å»º Token ä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨ç™»å½•ï¼š

```bash
wrangler login
```

è¿™ä¼šæ‰“å¼€æµè§ˆå™¨è¿›è¡Œ OAuth è®¤è¯ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»º Tokenã€‚

**æ³¨æ„**ï¼šè¿™éœ€è¦æµè§ˆå™¨ç¯å¢ƒï¼Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå¯èƒ½ä¸å¯ç”¨ã€‚

## ğŸ“‹ æ£€æŸ¥æ¸…å•

åˆ›å»º Token æ—¶ç¡®ä¿ï¼š

- âœ… åŒ…å« `Account` â†’ `Cloudflare Pages` â†’ `Edit`
- âœ… åŒ…å« `Account` â†’ `Account Settings` â†’ `Read`
- âœ… åŒ…å« `User` â†’ `User Details` â†’ `Read`
- âœ… åŒ…å« `User` â†’ `Memberships` â†’ `Read`
- âœ… Account Resources è®¾ç½®ä¸º"All accounts"æˆ–ç‰¹å®šè´¦æˆ·
- âœ… å¤åˆ¶å®Œæ•´çš„ Tokenï¼ˆä¸è¦æœ‰ç©ºæ ¼æˆ–æ¢è¡Œï¼‰

## ğŸ†˜ å¦‚æœä»ç„¶å¤±è´¥

å¦‚æœæŒ‰ç…§ä¸Šè¿°æ­¥éª¤åˆ›å»ºçš„ Token ä»ç„¶å¤±è´¥ï¼Œè¯·æä¾›ï¼š

1. Token åˆ›å»ºæ—¶çš„æƒé™æˆªå›¾
2. é”™è¯¯ä¿¡æ¯çš„å®Œæ•´å†…å®¹
3. æˆ–è€…å°è¯•ä½¿ç”¨ `wrangler login` è¿›è¡Œæµè§ˆå™¨è®¤è¯

---

**å‡†å¤‡å¥½å**ï¼Œè¯·æä¾›æ–°çš„ API Tokenï¼Œæˆ‘ä¼šç«‹å³é‡æ–°éƒ¨ç½²ï¼
